{"ast":null,"code":"import { api_movies } from \"../utils\";\nimport { api_DB } from \"../utils\";\nimport { mapToArray } from \"../helpers\";\n\nconst getItemsTMDB = async () => {\n  const response = await api_movies.get(`movie/top_rated?`);\n  return response.data.results;\n};\n\nconst getTrailerTMDB = async (id, media_type) => {\n  let response;\n\n  if (media_type === 'tv') {\n    response = await api_movies.get(`tv/${id}/videos`);\n  } else {\n    response = await api_movies.get(`movie/${id}/videos`);\n  }\n\n  return response.data.results;\n};\n\nconst searchMulti = async _ref => {\n  let {\n    page,\n    search\n  } = _ref;\n  let response;\n\n  if (search) {\n    response = await api_movies.get(`search/multi?query=${search}&page=${page}`);\n  } else {\n    response = await api_movies.get(`movie/top_rated?page=${page}`);\n  }\n\n  return response.data;\n};\n\nconst addItemFB = async payload => {\n  await api_DB.post('/items.json', payload);\n};\n\nconst getItemsFB = async () => {\n  const response = await api_DB.get('/items.json');\n  return mapToArray(response.data);\n};\n\nconst deleteItemFB = async id => {\n  const response = await getItemsFB();\n  const foundItem = response.find(item => item.id === id);\n  await api_DB.delete(`/items/${foundItem === null || foundItem === void 0 ? void 0 : foundItem.idDB}.json`);\n};\n\nconst getItemFB = async idDB => {\n  const response = await api_DB.get(`/items/${idDB}.json`);\n  return response.data;\n};\n\nexport const itemsApi = {\n  getItemsTMDB,\n  searchMulti,\n  addItemFB,\n  getItemsFB,\n  deleteItemFB,\n  getItemFB,\n  getTrailerTMDB\n};","map":{"version":3,"sources":["C:/Users/User/Desktop/ProgramaciÃ³n/Clases Ada/proyectos/TP FINAL/cinemada/src/api/moviesDB.ts"],"names":["api_movies","api_DB","mapToArray","getItemsTMDB","response","get","data","results","getTrailerTMDB","id","media_type","searchMulti","page","search","addItemFB","payload","post","getItemsFB","deleteItemFB","foundItem","find","item","delete","idDB","getItemFB","itemsApi"],"mappings":"AACA,SAASA,UAAT,QAA2B,UAA3B;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,UAAT,QAA2B,YAA3B;;AAEA,MAAMC,YAAY,GAAG,YAAU;AACvB,QAAMC,QAAQ,GAAG,MAAMJ,UAAU,CAACK,GAAX,CAAgB,kBAAhB,CAAvB;AACA,SAAQD,QAAQ,CAACE,IAAT,CAAcC,OAAtB;AACH,CAHL;;AAKA,MAAMC,cAAc,GAAG,OAAMC,EAAN,EAA6BC,UAA7B,KAAmD;AACtE,MAAIN,QAAJ;;AACA,MAAGM,UAAU,KAAG,IAAhB,EAAsB;AAClBN,IAAAA,QAAQ,GAAE,MAAMJ,UAAU,CAACK,GAAX,CAAgB,MAAKI,EAAG,SAAxB,CAAhB;AACH,GAFD,MAEM;AACFL,IAAAA,QAAQ,GAAG,MAAMJ,UAAU,CAACK,GAAX,CAAgB,SAAQI,EAAG,SAA3B,CAAjB;AACH;;AACD,SAAOL,QAAQ,CAACE,IAAT,CAAcC,OAArB;AACH,CARD;;AAUA,MAAMI,WAAW,GAAG,cAAqD;AAAA,MAA/C;AAACC,IAAAA,IAAD;AAAOC,IAAAA;AAAP,GAA+C;AACrE,MAAIT,QAAJ;;AACA,MAAGS,MAAH,EAAU;AACNT,IAAAA,QAAQ,GAAG,MAAMJ,UAAU,CAACK,GAAX,CAA6B,sBAAqBQ,MAAO,SAAQD,IAAK,EAAtE,CAAjB;AACH,GAFD,MAGI;AACAR,IAAAA,QAAQ,GAAG,MAAMJ,UAAU,CAACK,GAAX,CAA6B,wBAAuBO,IAAK,EAAzD,CAAjB;AACH;;AACD,SAAOR,QAAQ,CAACE,IAAhB;AACH,CATD;;AAWA,MAAMQ,SAAS,GAAG,MAAOC,OAAP,IAAwB;AACtC,QAAMd,MAAM,CAACe,IAAP,CAAY,aAAZ,EAA2BD,OAA3B,CAAN;AAEH,CAHD;;AAKA,MAAME,UAAU,GAAG,YAA4B;AAC3C,QAAMb,QAAQ,GAAG,MAAMH,MAAM,CAACI,GAAP,CAAW,aAAX,CAAvB;AACA,SAAOH,UAAU,CAACE,QAAQ,CAACE,IAAV,CAAjB;AACH,CAHD;;AAIA,MAAMY,YAAY,GAAG,MAAOT,EAAP,IAAoB;AACrC,QAAML,QAAQ,GAAG,MAAMa,UAAU,EAAjC;AACA,QAAME,SAAS,GAAGf,QAAQ,CAACgB,IAAT,CAAeC,IAAD,IAAUA,IAAI,CAACZ,EAAL,KAAYA,EAApC,CAAlB;AACA,QAAMR,MAAM,CAACqB,MAAP,CAAe,UAASH,SAAV,aAAUA,SAAV,uBAAUA,SAAS,CAAEI,IAAK,OAAxC,CAAN;AAEH,CALD;;AAOA,MAAMC,SAAS,GAAG,MAAMD,IAAN,IAAqB;AACnC,QAAMnB,QAAQ,GAAG,MAAMH,MAAM,CAACI,GAAP,CAAY,UAASkB,IAAK,OAA1B,CAAvB;AACA,SAAOnB,QAAQ,CAACE,IAAhB;AACH,CAHD;;AAOA,OAAO,MAAMmB,QAAQ,GAAG;AAACtB,EAAAA,YAAD;AAAeQ,EAAAA,WAAf;AAA4BG,EAAAA,SAA5B;AAAuCG,EAAAA,UAAvC;AAAmDC,EAAAA,YAAnD;AAAiEM,EAAAA,SAAjE;AAA4EhB,EAAAA;AAA5E,CAAjB","sourcesContent":["import { ApiResponse, Filter, Items } from \"../types/models\";\r\nimport { api_movies } from \"../utils\";\r\nimport { api_DB } from \"../utils\";\r\nimport { mapToArray } from \"../helpers\";\r\n\r\nconst getItemsTMDB = async() =>{     \r\n        const response = await api_movies.get(`movie/top_rated?`);\r\n        return (response.data.results)\r\n    }\r\n\r\nconst getTrailerTMDB = async(id:number | undefined, media_type: string) =>{\r\n    let response\r\n    if(media_type==='tv') {\r\n        response= await api_movies.get(`tv/${id}/videos`)\r\n    } else{\r\n        response = await api_movies.get(`movie/${id}/videos`)\r\n    }\r\n    return response.data.results\r\n}\r\n\r\nconst searchMulti = async({page, search}:Filter): Promise<ApiResponse> =>{\r\n    let response\r\n    if(search){\r\n        response = await api_movies.get<ApiResponse>(`search/multi?query=${search}&page=${page}`)\r\n    } \r\n    else{\r\n        response = await api_movies.get<ApiResponse>(`movie/top_rated?page=${page}`);\r\n    }\r\n    return response.data\r\n}\r\n\r\nconst addItemFB = async (payload:Items) =>{\r\n    await api_DB.post('/items.json', payload)\r\n    \r\n}\r\n\r\nconst getItemsFB = async ():Promise<Items[]> =>{\r\n    const response = await api_DB.get('/items.json');\r\n    return mapToArray(response.data);\r\n}\r\nconst deleteItemFB = async (id:number) =>{\r\n    const response = await getItemsFB()\r\n    const foundItem = response.find((item) => item.id === id)\r\n    await api_DB.delete(`/items/${foundItem?.idDB}.json`)\r\n    \r\n}\r\n\r\nconst getItemFB = async(idDB: string)=>{\r\n    const response = await api_DB.get(`/items/${idDB}.json`)\r\n    return response.data\r\n}\r\n\r\n\r\n\r\nexport const itemsApi = {getItemsTMDB, searchMulti, addItemFB, getItemsFB, deleteItemFB, getItemFB, getTrailerTMDB}"]},"metadata":{},"sourceType":"module"}