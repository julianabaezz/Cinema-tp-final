{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\User\\\\Desktop\\\\Programaci\\xF3n\\\\Clases Ada\\\\proyectos\\\\TP FINAL\\\\cinemada\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\Desktop\\\\Programaci\\xF3n\\\\Clases Ada\\\\proyectos\\\\TP FINAL\\\\cinemada\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{api_movies}from\"../utils\";import{api_DB}from\"../utils\";import{mapToArray}from\"../helpers\";var getItemsTMDB=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api_movies.get(\"movie/top_rated?\");case 2:response=_context.sent;return _context.abrupt(\"return\",response.data.results);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getItemsTMDB(){return _ref.apply(this,arguments);};}();var getTrailerTMDB=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,media_type){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(media_type==='tv')){_context2.next=6;break;}_context2.next=3;return api_movies.get(\"tv/\".concat(id,\"/videos\"));case 3:response=_context2.sent;_context2.next=9;break;case 6:_context2.next=8;return api_movies.get(\"movie/\".concat(id,\"/videos\"));case 8:response=_context2.sent;case 9:return _context2.abrupt(\"return\",response.data.results);case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function getTrailerTMDB(_x,_x2){return _ref2.apply(this,arguments);};}();var searchMulti=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var page,search,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:page=_ref3.page,search=_ref3.search;if(!search){_context3.next=7;break;}_context3.next=4;return api_movies.get(\"search/multi?query=\".concat(search,\"&page=\").concat(page));case 4:response=_context3.sent;_context3.next=10;break;case 7:_context3.next=9;return api_movies.get(\"movie/top_rated?page=\".concat(page));case 9:response=_context3.sent;case 10:return _context3.abrupt(\"return\",response.data);case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function searchMulti(_x3){return _ref4.apply(this,arguments);};}();var addItemFB=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(payload){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return api_DB.post('/items.json',payload);case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function addItemFB(_x4){return _ref5.apply(this,arguments);};}();var getItemsFB=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return api_DB.get('/items.json');case 2:response=_context5.sent;return _context5.abrupt(\"return\",mapToArray(response.data));case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function getItemsFB(){return _ref6.apply(this,arguments);};}();var deleteItemFB=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id){var response,foundItem;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return getItemsFB();case 2:response=_context6.sent;foundItem=response.find(function(item){return item.id===id;});api_DB.delete(\"/items/\".concat(foundItem===null||foundItem===void 0?void 0:foundItem.idDB,\".json\"));case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function deleteItemFB(_x5){return _ref7.apply(this,arguments);};}();var getItemFB=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(idDB){var response;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return api_DB.get(\"/items/\".concat(idDB,\".json\"));case 2:response=_context7.sent;return _context7.abrupt(\"return\",response.data);case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function getItemFB(_x6){return _ref8.apply(this,arguments);};}();export var itemsApi={getItemsTMDB:getItemsTMDB,searchMulti:searchMulti,addItemFB:addItemFB,getItemsFB:getItemsFB,deleteItemFB:deleteItemFB,getItemFB:getItemFB,getTrailerTMDB:getTrailerTMDB};","map":{"version":3,"sources":["C:/Users/User/Desktop/ProgramaciÃ³n/Clases Ada/proyectos/TP FINAL/cinemada/src/api/moviesDB.ts"],"names":["api_movies","api_DB","mapToArray","getItemsTMDB","get","response","data","results","getTrailerTMDB","id","media_type","searchMulti","page","search","addItemFB","payload","post","getItemsFB","deleteItemFB","foundItem","find","item","delete","idDB","getItemFB","itemsApi"],"mappings":"kWACA,OAASA,UAAT,KAA2B,UAA3B,CACA,OAASC,MAAT,KAAuB,UAAvB,CACA,OAASC,UAAT,KAA2B,YAA3B,CAEA,GAAMC,CAAAA,YAAY,0FAAG,sKACUH,CAAAA,UAAU,CAACI,GAAX,oBADV,QACPC,QADO,+CAELA,QAAQ,CAACC,IAAT,CAAcC,OAFT,wDAAH,kBAAZJ,CAAAA,YAAY,0CAAlB,CAKA,GAAMK,CAAAA,cAAc,2FAAG,kBAAMC,EAAN,CAA6BC,UAA7B,wIAEhBA,UAAU,GAAG,IAFG,kDAGCV,CAAAA,UAAU,CAACI,GAAX,cAAqBK,EAArB,YAHD,QAGfJ,QAHe,qEAKEL,CAAAA,UAAU,CAACI,GAAX,iBAAwBK,EAAxB,YALF,QAKfJ,QALe,wDAOZA,QAAQ,CAACC,IAAT,CAAcC,OAPF,2DAAH,kBAAdC,CAAAA,cAAc,iDAApB,CAUA,GAAMG,CAAAA,WAAW,2FAAG,sKAAOC,IAAP,OAAOA,IAAP,CAAaC,MAAb,OAAaA,MAAb,KAEbA,MAFa,iDAGKb,CAAAA,UAAU,CAACI,GAAX,8BAAkDS,MAAlD,kBAAiED,IAAjE,EAHL,QAGZP,QAHY,sEAMKL,CAAAA,UAAU,CAACI,GAAX,gCAAoDQ,IAApD,EANL,QAMZP,QANY,yDAQTA,QAAQ,CAACC,IARA,2DAAH,kBAAXK,CAAAA,WAAW,8CAAjB,CAWA,GAAMG,CAAAA,SAAS,2FAAG,kBAAOC,OAAP,6IACRd,CAAAA,MAAM,CAACe,IAAP,CAAY,aAAZ,CAA2BD,OAA3B,CADQ,yDAAH,kBAATD,CAAAA,SAAS,8CAAf,CAKA,GAAMG,CAAAA,UAAU,2FAAG,4KACQhB,CAAAA,MAAM,CAACG,GAAP,CAAW,aAAX,CADR,QACTC,QADS,iDAERH,UAAU,CAACG,QAAQ,CAACC,IAAV,CAFF,0DAAH,kBAAVW,CAAAA,UAAU,2CAAhB,CAIA,GAAMC,CAAAA,YAAY,2FAAG,kBAAOT,EAAP,oKACMQ,CAAAA,UAAU,EADhB,QACXZ,QADW,gBAEXc,SAFW,CAECd,QAAQ,CAACe,IAAT,CAAc,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACZ,EAAL,GAAYA,EAAtB,EAAd,CAFD,CAGjBR,MAAM,CAACqB,MAAP,kBAAwBH,SAAxB,SAAwBA,SAAxB,iBAAwBA,SAAS,CAAEI,IAAnC,WAHiB,wDAAH,kBAAZL,CAAAA,YAAY,8CAAlB,CAOA,GAAMM,CAAAA,SAAS,2FAAG,kBAAMD,IAAN,0JACStB,CAAAA,MAAM,CAACG,GAAP,kBAAqBmB,IAArB,UADT,QACRlB,QADQ,iDAEPA,QAAQ,CAACC,IAFF,0DAAH,kBAATkB,CAAAA,SAAS,8CAAf,CAOA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,CAACtB,YAAY,CAAZA,YAAD,CAAeQ,WAAW,CAAXA,WAAf,CAA4BG,SAAS,CAATA,SAA5B,CAAuCG,UAAU,CAAVA,UAAvC,CAAmDC,YAAY,CAAZA,YAAnD,CAAiEM,SAAS,CAATA,SAAjE,CAA4EhB,cAAc,CAAdA,cAA5E,CAAjB","sourcesContent":["import { ApiResponse, Filter, Items } from \"../types/models\";\r\nimport { api_movies } from \"../utils\";\r\nimport { api_DB } from \"../utils\";\r\nimport { mapToArray } from \"../helpers\";\r\n\r\nconst getItemsTMDB = async() =>{     \r\n        const response = await api_movies.get(`movie/top_rated?`);\r\n        return (response.data.results)\r\n    }\r\n\r\nconst getTrailerTMDB = async(id:number | undefined, media_type: string) =>{\r\n    let response\r\n    if(media_type==='tv') {\r\n        response= await api_movies.get(`tv/${id}/videos`)\r\n    } else{\r\n        response = await api_movies.get(`movie/${id}/videos`)\r\n    }\r\n    return response.data.results\r\n}\r\n\r\nconst searchMulti = async({page, search}:Filter): Promise<ApiResponse> =>{\r\n    let response\r\n    if(search){\r\n        response = await api_movies.get<ApiResponse>(`search/multi?query=${search}&page=${page}`)\r\n    } \r\n    else{\r\n        response = await api_movies.get<ApiResponse>(`movie/top_rated?page=${page}`);\r\n    }\r\n    return response.data\r\n}\r\n\r\nconst addItemFB = async (payload:Items) =>{\r\n    await api_DB.post('/items.json', payload)\r\n    \r\n}\r\n\r\nconst getItemsFB = async ():Promise<Items[]> =>{\r\n    const response = await api_DB.get('/items.json');\r\n    return mapToArray(response.data);\r\n}\r\nconst deleteItemFB = async (id:number) =>{\r\n    const response = await getItemsFB()\r\n    const foundItem = response.find((item) => item.id === id)\r\n    api_DB.delete(`/items/${foundItem?.idDB}.json`)\r\n    \r\n}\r\n\r\nconst getItemFB = async(idDB: string)=>{\r\n    const response = await api_DB.get(`/items/${idDB}.json`)\r\n    return response.data\r\n}\r\n\r\n\r\n\r\nexport const itemsApi = {getItemsTMDB, searchMulti, addItemFB, getItemsFB, deleteItemFB, getItemFB, getTrailerTMDB}"]},"metadata":{},"sourceType":"module"}